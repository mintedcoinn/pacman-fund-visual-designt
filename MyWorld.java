import greenfoot.*;

public class MyWorld extends World {
    public static int[][] wrld ={
    {-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1},
    {-1,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,-1,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,-1},
    {-1,16, 3, 5, 5, 5, 5, 5, 7, 5, 5, 5, 5, 5, 5, 5, 5, 5, 7, 5, 5, 5, 6,16,-1,16, 3, 5, 5, 5, 7, 5, 5, 5, 5, 5, 5, 5, 5, 5, 7, 5, 5, 5, 5, 5, 6,16,-1},
    {-1,16,10,16,16,16,16,16,10,16,16,16,16,16,16,16,16,16,10,16,16,16,10,16,-1,16,10,16,16,16,10,16,16,16,16,16,16,16,16,16,10,16,16,16,16,16,10,16,-1},
    {-1,16,10,16,-6,-1,-7,16,10,16,-6,-1,-1,-1,-1,-1,-7,16,10,16,-2,16,10,16,-1,16,10,16,-2,16,10,16,-6,-1,-1,-1,-1,-1,-7,16,10,16,-6,-1,-7,16,10,16,-1},
    {-1,16,10,16,-9,-1,-8,16,10,16,-9,-1,-1,-1,-1,-1,-8,16,10,16,-1,16,10,16,-1,16,10,16,-1,16,10,16,-9,-1,-1,-1,-1,-1,-8,16,10,16,-9,-1,-8,16,10,16,-1},
    {-1,16,10,16,16,16,16,16,10,16,16,16,16,16,16,16,16,16,10,16,-1,16,10,16,-1,16,10,16,-1,16,10,16,16,16,16,16,16,16,16,16,10,16,16,16,16,16,10,16,-1},
    {-1,16,11, 5, 5, 5, 5, 5,15, 5, 5, 5, 7, 5, 5, 5, 5, 5,12,16,-1,16,10,16,-1,16,10,16,-1,16, 9, 5, 5, 5, 5, 5, 7, 5, 5, 5,15, 5, 5, 5, 5, 5,14,16,-1},
    {-1,16,10,16,16,16,16,16,10,16,16,16,10,16,16,16,16,16,16,16,-1,16,10,16,-1,16,10,16,-1,16,16,16,16,16,16,16,10,16,16,16,10,16,16,16,16,16,10,16,-1},
    {-1,16,10,16,-4,-1,-5,16,10,16,-2,16,10,16,-4,-1,-1,-1,-1,-1,-1,16,10,16,-3,16,10,16,-1,-1,-1,-1,-1,-1,-5,16,10,16,-2,16,10,16,-4,-1,-5,16,10,16,-1},
    {-1,16,10,16,16,16,16,16,10,16,-1,16,10,16,16,16,16,16,16,16,16,16,10,16,16,16,10,16,16,16,16,16,16,16,16,16,10,16,-1,16,10,16,16,16,16,16,10,16,-1},
    {-1,16, 9, 5, 5, 5, 7, 5,12,16,-1,16, 9, 5, 5, 5, 7, 5, 5, 5, 5, 5,13, 5, 7, 5,13, 5, 5, 5, 5, 5, 7, 5, 5, 5,12,16,-1,16, 9, 5, 7, 5, 5, 5,12,16,-1},
    {-1,16,16,16,16,16,10,16,16,16,-1,16,16,16,16,16,10,16,16,16,16,16,16,16,10,16,16,16,16,16,16,16,10,16,16,16,16,16,-1,16,16,16,10,16,16,16,16,16,-1},
    {-9,-1,-1,-1,-5,16,10,16,-4,-1,-1,-1,-1,-1,-5,16,10,16,-6,-1,-1,-1,-5,16,10,16,-4,-1,-1,-1,-7,16,10,16,-4,-1,-1,-1,-1,-1,-5,16,10,16,-4,-1,-1,-1,-8},
    {16,16,16,16,16,16,10,16,16,16,16,16,16,16,16,16,10,16,-1,16,16,16,16,16,10,16,16,16,16,16,-1,16,10,16,16,16,16,16,16,16,16,16,10,16,16,16,16,16,16},
    { 1, 5, 5, 5, 5, 5,15, 5, 5, 5, 5, 5, 5, 5, 5, 5,14,16,-1,16, 3, 7, 7, 7,10, 7, 7, 7, 6,16,-1,16,11, 5, 5, 5, 5, 5, 5, 5, 5, 5,15, 5, 5, 5, 5, 5, 4},
    {16,16,16,16,16,16,10,16,16,16,16,16,16,16,16,16,10,16,-1,16,11,15,15,15,10,15,15,15,14,16,-1,16,10,16,16,16,16,16,16,16,16,16,10,16,16,16,16,16,16},
    {-6,-1,-1,-1,-5,16,10,16,-4,-1,-1,-1,-1,-1,-7,16,10,16,-1,16,11,15,15,15,10,15,15,15,14,16,-1,16,10,16,-6,-1,-1,-1,-1,-1,-5,16,10,16,-4,-1,-1,-1,-7},
    {-1,16,16,16,16,16,10,16,16,16,16,16,16,16,-1,16,10,16,-1,16, 9,13,13,13,10,13,13,13,12,16,-1,16,10,16,-1,16,16,16,16,16,16,16,10,16,16,16,16,16,-1},
    {-1,16, 3, 5, 5, 5,15, 5, 5, 5, 5, 5, 6,16,-1,16,10,16,-1,16,16,16,16,16,16,16,16,16,16,16,-1,16,10,16,-1,16, 3, 5, 5, 5, 5, 5,15, 5, 5, 5, 6,16,-1},
    {-1,16,10,16,16,16,10,16,16,16,16,16,10,16,-3,16,10,16,-9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-8,16,10,16,-3,16,10,16,16,16,16,16,10,16,16,16,10,16,-1},
    {-1,16,10,16,-2,16,10,16,-6,-1,-7,16,10,16,16,16,10,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,10,16,16,16,10,16,-6,-1,-7,16,10,16,-2,16,10,16,-1},
    {-1,16,10,16,-1,16,10,16,-1,-1,-1,16, 9, 5, 5, 5,15, 5, 5, 5, 7, 5, 5, 5, 5, 5, 5, 5, 7, 5, 5, 5,15, 5, 5, 5,12,16,-1,-1,-1,16,10,16,-1,16,10,16,-1},
    {-1,16,10,16,-1,16,10,16,-1,-1,-1,16,16,16,16,16,10,16,16,16,10,16,16,16,16,16,16,16,10,16,16,16,10,16,16,16,16,16,-1,-1,-1,16,10,16,-1,16,10,16,-1},
    {-1,16,10,16,-1,16,10,16,-9,-1,-1,-1,-1,-1,-5,16,10,16,-2,16,10,16,-4,-1,-1,-1,-5,16,10,16,-2,16,10,16,-4,-1,-1,-1,-1,-1,-8,16,10,16,-1,16,10,16,-1},
    {-1,16,10,16,-1,16,10,16,16,16,16,16,16,16,16,16,10,16,-1,16,10,16,16,16,16,16,16,16,10,16,-1,16,10,16,16,16,16,16,16,16,16,16,10,16,-1,16,10,16,-1},
    {-1,16,10,16,-1,16, 9, 5, 5, 5, 7, 5, 5, 5, 5, 5,12,16,-1,16, 9, 5, 5, 5, 7, 5, 5, 5,12,16,-1,16, 9, 5, 5, 5, 5, 5, 7, 5, 5, 5,12,16,-1,16,10,16,-1},
    {-1,16,10,16,-1,16,16,16,16,16,10,16,16,16,16,16,16,16,-1,16,16,16,16,16,10,16,16,16,16,16,-1,16,16,16,16,16,16,16,10,16,16,16,16,16,-1,16,10,16,-1},
    {-1,16,10,16,-1,-1,-1,-1,-5,16,10,16,-4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-5,16,10,16,-4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-5,16,10,16,-4,-1,-1,-1,-1,16,10,16,-1},
    {-1,16,10,16,16,16,16,16,16,16,10,16,16,16,16,16,16,16,16,16,16,16,16,16,10,16,16,16,16,16,16,16,16,16,16,16,16,16,10,16,16,16,16,16,16,16,10,16,-1},
    {-1,16, 9, 5, 5, 5, 5, 5, 5, 5,13, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5,13, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5,13, 5, 5, 5, 5, 5, 5, 5,12,16,-1},
    {-1,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,-1},
    {-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1}
    };
    public final static int worldPieceSize = 20;
    public final static int worldHalfPieceSize = worldPieceSize /2;
    public static int POWER_PILL_COUNT = 8;
    private boolean gamePaused = false;
        
    public static boolean redInWorld = false;
    private int redCoolDown = 0;
    public static boolean yellowInWorld = false;
    private int yellowCoolDown = 0;
    public static boolean blueInWorld = false;
    private int blueCoolDown = 0;
    public static boolean pinkInWorld = false;
    private int pinkCoolDown = 0;
    public MyWorld() {    
        super(980, 700, 1);
        setBackground("background.jpg");
        buildLab();
        
        Label score = new Label("Score ", 25);
        addObject(score, 35, 680);
        //player = new Player(score);
        //передаем score в Player, чтобы потом можно было изменять счет через
        //score.update_score(число)

        spawnRed();
        spawnBlue();
        spawnYellow();
        spawnPink();
    }

    public void act() {
        if (Greenfoot.isKeyDown("escape")) {
            pauseGame();
        }
        
        if (!redInWorld){
            redCoolDown += 100;
        }
        if (!redInWorld && redCoolDown>0){
            spawnRed();
        }
    }
    public void pauseGame() {
        if (!gamePaused) {
            gamePaused = true;
            Greenfoot.setWorld(new PauseMenu(this));
        }
    }
    
    public void resumeGame() {
        gamePaused = false;
    }
    
    private void buildLab() {
        for (int y = 0; y < wrld.length; y++) {
            for (int x = 0; x < wrld[y].length; x++) {
                if (wrld[y][x] != 0) {
                    addObject(new Wall(wrld[y][x]), x * worldPieceSize + worldHalfPieceSize, y * worldPieceSize + worldHalfPieceSize);
                }
            }
        }
    }
    
    public void spawnRed(){
        addObject(new Red_ghost(), 24*worldPieceSize + worldHalfPieceSize,13*worldPieceSize + worldHalfPieceSize);
        redInWorld = true;
    }
     public void spawnBlue(){
        addObject(new Blue_ghost(), 24*worldPieceSize + worldHalfPieceSize,13*worldPieceSize + worldHalfPieceSize);
        redInWorld = true;
    }
     public void spawnYellow(){
        addObject(new Yellow_ghost(), 24*worldPieceSize + worldHalfPieceSize,13*worldPieceSize + worldHalfPieceSize);
        redInWorld = true;
    }
     public void spawnPink(){
        addObject(new Pink_ghost(), 24*worldPieceSize + worldHalfPieceSize,13*worldPieceSize + worldHalfPieceSize);
        redInWorld = true;
    }
}
